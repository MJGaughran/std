#! Generated by VisualDCT v2.5


record(busy, "$(P)$(Q)Busy") {
}

record(bo, "$(P)$(Q)SetBusy") {
  field(UDF, "0")
  field(VAL, "1")
  field(OUT, "$(P)$(Q)Busy PP")
  field(OSV, "NO_ALARM")
}

# tweak
record(ao, "$(P)$(Q)TweakVal") {
  field(PREC, "3")
  field(DOL, "1")
}

record(transform, "$(P)$(Q)Tweak") {
  field(CLCD, "a?c-e:b?c+e:c")
  field(INPC, "$(P)$(Q)Ramp.VAL  NPP NMS")
  field(INPE, "$(P)$(Q)TweakVal.VAL  NPP MS")
  field(OUTD, "$(P)$(Q)Ramp.VAL  PP MS")
  field(OUTF, "$(P)$(Q)Tweak.A  NPP NMS")
  field(OUTG, "$(P)$(Q)Tweak.B  NPP NMS")
  field(PREC, "3")
}

record(calcout, "$(P)$(Q)RampStop") {
  field(INPA, "$(P)$(Q)Ramp.VAL")
  field(INPB, "$(P)$(Q)Ramp.OVAL")
  field(CALC, "A#B")
  field(OUT, "$(P)$(Q)Ramp.VAL PP")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use OCAL")
  field(OCAL, "B")
}

record(ao, "$(P)$(Q)Ramp") {
  field(OROC, ".1")
  field(OUT, "$(P)$(Q)PutValue.DO1 PP")
  field(PREC, "3")
  field(FLNK, "$(P)$(Q)SetBusy")
}

record(calcout, "$(P)$(Q)RampCheckOutput") {
  field(SDIS, "$(P)$(Q)RampStop.PACT")
  field(INPA, "$(P)$(Q)Ramp.VAL")
  field(INPB, "$(P)$(Q)Ramp.OVAL")
  field(INPC, "$(P)$(Q)Ramp.OROC")
  field(CALC, "abs(a-b)>C/2")
  field(OOPT, "When Non-zero")
  field(ODLY, "0.1")
  field(OUT, "$(P)$(Q)Ramp.PROC CA")
  field(PREC, "3")
}

record(sseq, "$(P)$(Q)PutValue") {
  field(LNK1, "$(P)$(Q)RampTestTarget CA")
  field(WAIT1, "Wait")
  field(LNK2, "$(P)$(Q)RampCheckOutput.PROC PP")
  field(LNK3, "$(P)$(Q)RampCheckDone.PROC PP")
  field(PREC, "3")
}

record(calcout, "$(P)$(Q)RampCheckDone") {
  field(INPA, "$(P)$(Q)Ramp.VAL NPP")
  field(INPB, "$(P)$(Q)Ramp.OVAL NPP")
  field(INPC, "$(P)$(Q)Ramp.OROC")
  field(CALC, "abs(a-b)>C/2")
  field(OOPT, "When Zero")
  field(ODLY, ".1")
  field(OUT, "$(P)$(Q)Busy CA")
  field(PREC, "3")
  field(SCAN, "1 second")
  field(DISV, "0")
  field(SDIS, "$(P)$(Q)Busy.VAL")
}

record(ao, "$(P)$(Q)RampTestTarget") {
  field(PREC, "3")
}

record(ai, "$(P)$(Q)Readback") {
  field(PREC, "3")
  field(INP, "$(P)$(Q)RampTestTarget.VAL CP")
}

record(scalcout, "$(P)$(Q)PutLinkCalc") {
  field(AA, "$(P)$(Q)RampTestTarget")
  field(CALC, "aa+' CA'")
  field(OUT, "$(P)$(Q)PutValue.LNK1 CA")
}

record(scalcout, "$(P)$(Q)ReadLinkCalc") {
  field(CALC, "aa+' CP'")
  field(INAA, "$(P)$(Q)PutLinkCalc.AA CP")
  field(OUT, "$(P)$(Q)Readback.INP CA")
}

record(seq, "$(P)$(Q)Init") {
  field(SCAN, "1 second")
  field(LNK1, "$(P)$(Q)PutLinkCalc.PROC")
  field(DO2, "0")
  field(LNK2, "$(P)$(Q)Init.SCAN CA")
}
